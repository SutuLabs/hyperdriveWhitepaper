# 简介

## 区块链
区块链的历史可以追溯到2008年，当时中本聪发表了白皮书《比特币：一个点对点的电子现金系统》。该白皮书描述了一种数字货币交易系统，以记录和验证交易事务。在2009年推出的比特币网络中实现了该交易系统，其中用到的技术即被称为区块链技术。

区块链是一个用于数字货币交易的账本，其中交易数据被组织成多个区块的形式，每个区块记录一段时间范围内的交易数据，这些区块随着时间的推移持续增加，并按照时间顺序链接，新增的区块通过加密哈希地址指向旧的区块。随着时间推移，这些区块将形成一条记载着过往所有交易数据的链条（类似于链表数据结构）。

为了管理和维护这个区块链，设计人员构建了一个区块链网络，其中每个参与网络的计算机或服务器被视为网络中的一个节点。整个网络被分为多个节点，每个节点都保存着区块链的完整副本。这些节点通过网络互相通信，交易数据在众多节点之间共享和更新。当添加一组新的交易时，交易数据都将在全网广播。

当涉及到区块链技术时，"区块链"一词通常指代整个分布式网络，因此在本文中，我们将使用“区块链”一词来代指区块链网络。

区块链技术之所以能被广泛应用于货币交易系统，主要得益于其所具备的去中心化的特点。去中心化，意味着区块链网络中没有单一的中心服务器或机构，交易和记录都是由网络中的多个节点协同完成。去中心化因此带来了以下几点好处：

1. 安全性：去中心化意味着没有单一机构或个人控制该系统，这就减少了攻击者攻击这些系统的可能性，因为攻击一个中心化的系统只需要攻击一个中心化的控制点，而攻击去中心化的系统则需要攻击多个节点，这大大增加了攻击的难度。当存在网络中某用户想要随意篡改系统上的任何信息（交易数据）或欺骗系统时，网络中所有节点的数据都需要被修改，当网络节点数目足够多时，直接篡改数据这一操作将在事实上变得不可能，这使得已经建立的区块链十分安全。

2. 透明度：去中心化的系统提供完全透明的交易历史记录。区块链网络上的任何人都可以查看和验证交易记录，这有助于保持系统的公平性和完整性。

3. 降低交易成本：在去中心化的系统中，交易可以在两个参与者之间直接进行，而不需要通过第三方机构进行，因此减少了交易成本，并提高了交易的效率。

4. 支持创新：去中心化的系统提供了一个开放的平台，可以让参与者自由地进行开发和创新，这有助于推动技术和商业的发展。 

去中心化带来的众多好处使得人们开始思考区块链技术不仅能用在货币交易系统，或许在更多对安全、隐私比较注重的领域都具有极强的发展潜力。

## 区块链互操作性
由于区块链技术的本质是隔离的，导致加密数字货币只能与其原始链绑定。但随着区块链技术的发展和区块链生态的日益丰富，人们越来越希望实现不同的区块链网络之间的实时通信、交互和数据与价值共享。因此人们开启了对区块链间互操作性的探索。这里所说的互操作性指的是不同区块链系统实例之间交换信息并使用交换的信息的能力，即传统意义上的跨链。它主要表现为不同区块链系统实例之间信息交互的过程，包括同构区块链互操作性和异构区块链互操作性。

探索解决互操作性问题的第一次尝试是创建像Coinbase和币安这样的加密货币交易所。今天，它们被称为中心化交易所（Centralized Exchange, CEX）。中心化交易所在加密货币中发挥着重要作用，但由于它们是集中化的，这与创建去中心化平台的初衷相矛盾，而且它们仅处理代币。

因此，为了解决CEX的集中化问题，人们开发了去中心化交易所（Decentralized exchange, DEX）。DEX在智能合约内运行，可以像它运行的区块链一样去中心化，但DEX仅限于使用其本地区块链上的原生代币。要获得来自其他区块链的代币，必须将DEX与跨链桥结合使用。

所谓跨链桥，本质上是一种将A链上的数据D（或信息I，或消息M）安全可信地转移到B链并在B链上产生预期效果的一种技术。现在，我们可以将跨链桥理解为在一个链上“锁定”资产以换取另一个链上的包装资产的应用程序。然后，可以交换包装资产以获取原始的“背书”资产。此外，对于当前跨链桥技术的理论和应用还有以下几点值得注意：
- 跨链桥在理论上可以去中心化，但在实践中往往相当集中化。
- 跨链桥目前是持有代币在其“本地”链以外的链上的唯一方法。如果您在以太坊以外的链上持有ETH，则根据定义，它是一个包装代币(wrapped token)。
- 跨链桥彼此都不相容。使用多个跨链桥只会使代币“双重包装”。
- 如果代币在经过多个跨链桥或区块链后变为双重包装，则可能需要进行复杂的解包过程才能回到原始代币。

总结而言，区块链生态的发展使人们对区块链互操作性出现需求，CEX是解决隔离的区块链的最初解决方案，此后的DEX的出现是基于去中心化的初心对CEX的简单响应，进一步地，DEX在互操作性和去中心化的同时要求下创造了对跨链桥的需求。时间轴上的每个解决方案都仅仅是对先前问题的临时修补，而今日区块链生态中的流动性分裂、双重包装代币、孤立的用户群和钱包不兼容性等问题就是一次次临时修补留下的痼疾。更多的临时解决方案只会是长期问题的短期修补，互操作性要求的是比代币更复杂的数据结构和比转移更复杂的操作。更加至关重要的是设计新的原语和核心基础设施，使下一代去中心化应用程序能够超越这些悬而未决的限制。

这就是Hyperdrive的存在原因。Hyperdrive提出了一种新的应用程序开发方式，利用每个区块链的优势，同时减轻当前生态系统的问题，真正促进区块链技术朝着通用计算平台的方向发展。

## 现有跨链的解决方案
跨链转移的关键在于如何在源链上进行安全可靠的状态转移，或者换句话说，如何验证源链上的交易。现有的跨链项目虽然建立在不同的设计概念上，但存在一个共同问题，即过度依赖信任设施。

- LayerZero依赖于Oracle和Relay将区块链头部、交易和交易证明分别传输到目标链，以便在目标链上的合约中验证交易的合法性。这种方案简单轻量，**但在这个过程中需要相信Oracle和Relay是诚实的，不会进行恶意行为，因为两者的勾结将对系统安全构成威胁**。

- cBridge是跨链转移中使用多重签名方案的应用。通过预定义门限和相应的验证者白名单，每个验证者将在验证源链上的交易后签署自己的签名。当收集到预定义数量的签名时，跨链交易将完成。这个方案相对简单，技术门槛低，但在**整个过程中需要相信大多数验证者是诚实的，并相信验证者可以安全地存储私钥而不会有泄露的风险**。在过去的两年中，与多重签名方案相关的安全事件频频发生，主要是由于验证器私钥的维护不当，导致了巨额资产损失，例如Wormhole，Horizon等。

- Nomad可以被归类为基于Optimism的跨链解决方案。其基本理念是，在一个给定的时间窗口内，如果没有人质疑验证者的行为，那么可以乐观地假设验证者是诚实的。在这个过程中，**需要乐观地假设系统中会有诚实的挑战者来质疑恶意验证者的不当行为**。和OP-Rollup（乐观交易扩容）方案一样，它采用了乐观验证模型。区别在于它需要短时间内进行跨链交易。这个跨链方案需要设置一个较短的挑战期，这可能会带来潜在的安全风险。同时，与OP-Rollup不同的是，后者旨在面向具有大量关注度的主流链，例如以太坊，而这个跨链方案的明显缺陷是在不太受欢迎的链上可能没有足够的第三方挑战者。

- Cosmos IBC和Polkadot XCMP支持公共区块链基础设施上的跨链转账。对于与这两个项目同处于一个多链生态下的区块链项目而言，跨链功能将基于其构建的底层设施实现。但**对于已经运行的成熟公共链或者说异构链来说，它们并不是非常有用，跨链支持的范围相当有限**。这两个项目也提出了连接第三方链的跨链解决方案，但迄今为止，这些解决方案尚未得到广泛使用。 

- Multichain依赖于密码学的安全多方计算网络（Secure Multi-Party Computation, SMPC）来对跨链资产进行分布式控制。当在源链上验证交易的节点数量达到阈值时，网络中的多个节点协作生成签名，从而完成跨链交易。在整个过程中，私钥从未完全呈现——需要信任的是SMPC网络。由**于SMPC协议的复杂性和分布式性质，SMPC网络的开发需要密码学研发能力和基础设施。在技术累积较少的初创项目实施该协议时可能容易受到潜在安全风险的影响**，或者在去中心化方面存在不足。

<!-- - Wormhole是一个基于Solana公链的跨链协议，可以实现主流公链和Solana的静态和动态跨链交易。Wormhole协议的实现借助了Solana的高吞吐量和低交易确认时间的特性。Wormhole的设计有很多优点，比如可以支持比特币和以太坊等多种公链的资产映射，可以执行交易和智能合约等操作，而且还支持原生映射和智能合约映射等多种映射方式。此外，Wormhole还可以通过链下签名的方式实现去中心化的安全管理，可以减少跨链的交易费用，提高用户的跨链交易体验。不过，Wormhole也存在一些**局限性，比如其目前只支持比特币和以太坊等几种公链的资产映射，而且它的安全性和稳定性也需要在长期使用中得到验证**。 -->

最近有一些跨链桥的安全事件暴露出了过度依赖信任机制的风险。这种信任机制与区块链技术去中心化的本质相矛盾，可能成为区块链生态系统的薄弱环节，容易受到安全攻击并导致重大资产损失。因此，我们需要开发无需信任的、去中心化的机制来实现跨链交易，以确保区块链生态系统的长期可持续性和安全。

### 跨链的挑战
当前跨链解决方案中存在的一个重要挑战就是去中心化/去信任化问题在跨链这个领域再次出现。过往的跨链方案一定程度上牺牲了去中心化程度，采用个别中继节点验证交易，或对验证者预设信任，这违背了去信任化的初衷。因此，在构建区块链解决跨链问题时，我们仍必须保持去中心化的原则。我们构建的区块链由众多节点构成，并采用DPoS权益证明对交易进行联合签名，以保持去信任化和避免单点故障。虽然投票机制的出现需要增加我们对于治理问题的关注和跨链交易的复杂度，但为了保证安全，我们认为一定的复杂度代价值得付出，而且这一方面在未来是有进一步优化的空间。

此外，随着区块链技术的飞速发展，区块链上的数据量不断增加，丰富的数据背后必然沉淀着大量的价值。在庞大的区块链生态中，不同领域链之间的数据相互传输在未来必将占据重要的地位。因此，对本方案而言另一个重要的挑战就是区块链生态网络下的大数据传输问题。然而，过往跨链解决方案中，基于大数据的跨链传输这一问题还未被很好的解决。因此，本方案试图基于zkReducer的方法将传统的“map+reduce”方法迁移至跨链问题中，实现对一条链上的大数据进行抽象聚合，获得可信任、可验证的数据，并开放给其他链使用。

<!-- 跨链互操作性中存在一些技术挑战，这些挑战在之前的多链设计范例并不存在。**跨链信息同步和安全保障**是实现跨链交易的关键问题，需要确保各链的独立性和信息同步，以及采取适度隔离、检测安全事件和保证交易正确性等措施。不同跨链机制存在各自的安全问题，如公证机制的信任和哈希锁定的资金锁定机制和超时问题等。因此，在跨链系统设计过程中需要注意安全保护机制，并全面了解区块链技术的安全问题，以确保系统的安全性。如果能够解决这些安全性问题，跨链解决方案可以给区块链开启一个全新的功能。
- 跨链通信本质上需要安全性、信任或灵活性权衡，而在单个区块链上发生的交互不需要这些。这也意味着不同区块链上的智能合约之间的可组合性只能通过在安全性、信任假设或灵活性方面进行权衡来实现。

- 加密经济系统的弹性取决于它们最弱的点。即使底层网络是安全的，安全性较弱的跨链消息传递协议也会使资金受到攻击。判定跨链桥安全与否的一个关键因素是：攻击成功之前，有多少参与者需要被攻破。从这个意义上说，加强跨链桥的安全性意味着要增加节点的多样性，或在验证和中继后续交易到目标区块链的过程中增加密码学验证的安全性。

- 跨链通证桥的另一个考虑因素是最终性，这意味着一旦源链的交易成功提交，目标链上的资金应该可用了。如果没有保证最终性，源链上的反向交易（例如区块重组）可能会对目标链造成不利影响。

此外**跨链交易的验证**也是一个问题，实现区块链之间的互联，首先要做的是设计区块链系统之间的信任机制。交易的确认和验证涉及两个问题，一个是确认交易已经发生并写入区块链账本，另一个是验证该交易已经被系统中足够数量的块确认。

除此之外，跨链系统的设计还需要考虑系统稳定性、可扩展性以及易升级性、容错等等。 -->

## 零知识证明
### 零知识证明是什么？
零知识证明（Zero-Knowledge Proof，简称ZKP）是可以在不透露证明的具体内容及如何证明的前提下，证明某个声明是否真实的一种密码学技术，以此来实现保护数据隐私和安全的目的。具体来讲，对于某个可清晰描述的论断（或称之为声明），一个证明方能通过与验证方的交互而使验证方确信该论断或声明是正确的，但在整个交互过程中，验证方对论断结果以外的一切一无所知。“零知识”即是指验证方除了知晓证明方对论断判断结果之外，无法获取任何的额外信息。
设想构建这样一个场景：你需要向另一方（例如，一个服务提供商）证明一项声明（例如，“我是 X 国的公民”）。你需要提供“证据”来支持你的声明，例如国家护照或驾驶证。但这种方法存在用户隐私泄露的问题，与第三方服务商共享的个人身份信息储存在中心化数据库，这些数据库很容易受到黑客攻击。随着身份信息窃取成为一个越来越严峻的问题，人们呼吁采用更能保护隐私的方式来分享敏感信息。
以上面提到的场景为例，你只需要提供通过零知识证明生成的有效性证明来证明你的公民身份。验证者只需要检查证明中的一些属性是否属实，从而确认背后声明的真实性。
在可期望的未来，零知识证明可被应用到密码学、金融、电子投票、数字身份验证等领域。

一个可靠的零知识证明方法需要具备的三个性质：
1. 完备性：如果输入是有效的，那么零知识协议应该始终返回"真"。 因此，如果所依据的声明是真的，同时证明者和验证者都诚实，那么证明就能被接受。

2. 可靠性：如果输入是无效的，那么理论上不可能欺骗零知识协议输出“真”。 因此，一个说谎的证明者无法忽悠一个诚实的验证者相信一个无效的声明是有效的（小概率事件除外）。

3. 零知识：验证者除了知道声明的有效性或虚假性之外，其余一概不知（他们对声明内容“一无所知”）。 这项要求也阻止了验证者从证明中推导出原始输入（声明的内容）。


### 零知识证明与跨链
跨链技术转移通常需要在多个链之间共享数据，这可能会泄露敏感信息或产生安全风险。正如上面提到的现有的跨链解决方案都存在的过度依赖信任问题。而零知识证明作为一种保证交易隐私和安全的技术，通过它可以在不暴露交易细节的情况下，证明某个交易是合法的，并且该交易符合多个链上的条件和规则。这可以消除在跨链转移过程中的某些交易安全风险，同时提高交易效率。目前已有一些跨链解决方案如Brevis，zkRouter，nil.foundation和Telepathy，都是基于零知识证明技术而设计的。

- Brevis的跨链方案是基于zkSNARK的技术，该方案可以实现多条区块链之间的数据传输和资产转移，同时保护用户隐私和交易安全性。Brevis采用了验证人和随机数生成人两个角色，来确认跨链交易的合法性和保证算法的难度和安全性。

- zkRouter是一个基于zkSNARK的分布式跨链交易协议，使用了分层和分片技术来实现高效的交易处理，同时保护用户隐私和数据安全。zkRouter利用了Merkle树的结构和状态验证技术，来检查和确认跨链交易的合法性。

- nil.foundation：是一个跨链平台，旨在实现区块链之间的无缝连接。与其他跨链方案不同，nil.foundation使用了一种名为“无需授权跨链协议”(Non-authorization Cross-Chain Protocol, NACC)的技术来实现跨链转移。NACC协议是一种去中心化的技术，它可以让不同的区块链之间进行直接的互操作，并且不需要进行授权或信任。该方案的主要优点是高效、灵活，可以支持跨越任何两个区块链之间的跨链交易。

- Telepathy是由Succinct团队开发的协议，目标是使用户可以在无许可、去信任的情况下实现互操作性。通过Telepathy，DAPP可以安全地将消息从源链发送到任意目标链。该定义符合传统的跨链消息定义模型。

<!-- 零知识证明技术不仅可以解决跨链协议中的互操作性问题，可以提供一种通用的跨链证明机制，使得不同跨链协议之间可以进行互操作，还可以用于建立跨链金融的信任体系。跨链金融需要建立一个可信的体系，确保跨链资产的安全和可靠性。而零知识证明技术可以用于验证跨链资产的真实性和合法性，这将有助于建立一个更加安全和可靠的跨链金融生态系统。 -->

<!-- 总之，零知识证明技术在跨链技术的发展中具有非常重要的地位和价值，可以解决跨链交易的难点问题，提高跨链交易的安全性、隐私性、可扩展性和互操作性等，有望推动跨链技术的不断发展和创新。 -->

传统的跨链方法，除了最早P2P的原子交换是无需三方信任的，后来的跨链机制中的验证方法，主要分为外部验证和原生验证，原生验证主要指在目标链部署源链的节点，直接由目标链按照轻节点验证协议进行验证，因此原生验证无需安全假设，是原子交换之外的最佳跨链方式，但对于异构区块链，通常很难直接在目标链部署源链的轻节点。但zk-SNARK零知识证明框架具有零知识和证据精简的性质，因此可以将源链的轻节点验证结果通过零知识证明，精简的传递到目标链，在目标链以常数复杂度的验证函数确认后，即可完成验证工作，其安全特性等同于原生验证。

因此，基于零知识证明的跨链方案可以将原本的外部验证进化为原生验证，以减少安全假设，提高安全性，基于此，目标链仅需要知道源链的区块头哈希即可，Hyperdrive通过构造DPoS的zkHyperspace，作为所有外部链的节点，通过共识存储外部链的最新信息，并以此构造零知识证明的证据供目标链验证。以此大幅度提高了安全性。本项目也将验证DPoS比过去直接预定验证者的方案，具有更好的去中心化效果，以减少对个别中心信任的依赖。

更进一步，Hyperdrive系统还支持对大数据的抽取验证，这部分也利用了零知识证明技术的零知识性和精简性，可以证明抽取过程的正确性，并给出汇总的聚合结果共目标链使用。如何让大数据的抽取更加易于被开发者使用，并且确保过程的正确性是本项目的一个重要挑战和贡献。